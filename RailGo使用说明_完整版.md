# RailGo使用说明

## 3.2 功能模块说明

### 3.2.1 车次查询模块

车次查询模块提供列车时刻表查询功能，支持车次查询和站站查询两种方式。

页面功能详细说明：

1.1 车次查询页面 (pages/train/query.vue)
- 页面功能：提供车次查询和站站查询两种方式
- 输入内容：
  * 车次查询：输入车次号码（如G1、D321等），支持自定义键盘输入
  * 站站查询：选择发站和到站，支持同城车站查询
  * 查询日期：选择查询日期，默认为当天
- 显示内容：
  * 车次输入框及自定义键盘（仅车次查询）
  * 发站/到站选择器（仅站站查询）
  * 日期选择器
  * 查询按钮
  * 同城车站查询开关（仅站站查询在线模式）
- 交互功能：
  * 车次输入时显示预选词提示
  * 支持发站到站快速交换
  * 输入验证和空值检查

1.2 车次结果页面 (pages/train/trainResult.vue)
- 页面功能：展示车次详细信息，包括时刻表、正晚点、担当信息等
- 输入内容：从查询页面传递的车次号和日期
- 显示内容：
  * 车次基本信息（车次号、类型、起止站）
  * 时刻表详情（各站到发时间、里程、区间均速）
  * 正晚点信息（状态、预计时间、实际时间、停台、检票口）
  * 担当信息（值乘单位、车辆归属、车型图片）
  * 运行交路（相关车次列表）
  * 开行日历（显示开行日期）
- 交互功能：
  * 三个选项卡切换（时刻、运行、路径）
  * 点击车站可跳转到车站详情
  * 点击交路车次可查看该车次详情
  * 一键加载所有停台信息
  * 单独查询停台信息

### 3.2.2 车站查询模块

车站查询模块提供车站信息查询功能，包括通过车次、大屏信息等。

页面功能详细说明：

2.1 车站查询页面 (pages/station/query.vue)
- 页面功能：提供车站选择功能
- 输入内容：选择车站
- 显示内容：
  * 车站选择框
  * 查询按钮
- 交互功能：
  * 点击车站选择框跳转到车站选择页面
  * 输入验证和空值检查

2.2 车站选择页面 (pages/station/commonSelect.vue)
- 页面功能：提供车站搜索和选择功能
- 输入内容：搜索关键词
- 显示内容：
  * 搜索输入框
  * 车站列表（显示车站名称、电报码、所属城市）
  * 历史选择记录
- 交互功能：
  * 实时搜索过滤
  * 点击选择车站
  * 显示历史选择记录

2.3 车站结果页面 (pages/station/result.vue)
- 页面功能：展示车站详细信息，包括通过车次、大屏信息等
- 输入内容：从查询页面传递的车站电报码
- 显示内容：
  * 车站基本信息（名称、类型、所属路局、电报码）
  * 通过车次列表（车次、起止站、到发时间、停车时间）
  * 大屏信息（车次状态、检票口、站台）
  * 交通信息（地铁、公交等公共交通）
  * 车站设施信息（候车室、餐厅、商店等）
- 交互功能：
  * 多个选项卡切换（车次、大屏、交通）
  * 车次排序和筛选功能
  * 点击车次跳转到车次详情
  * 大屏信息滚动加载

### 3.2.3 实时测速模块

实时测速模块使用GPS进行实时速度测试功能。

页面功能详细说明：

3.1 实时测速页面 (pages/speed/speed.vue)
- 页面功能：使用GPS进行实时速度测试
- 输入内容：无
- 显示内容：
  * 当前速度（km/h）
  * 经纬度坐标
  * 半球位置信息（北半球/南半球，东半球/西半球）
  * 精度切换按钮（低精度/高精度）
- 交互功能：
  * 精度模式切换
  * 实时速度更新（每500ms更新一次）
  * 速度平滑处理（滚动平均算法）
  * 定位权限检查和提示

### 3.2.4 动车组查询模块

动车组查询模块提供动车组担当查询和配属查询功能。

页面功能详细说明：

4.1 动车组查询页面 (pages/emu/query.vue)
- 页面功能：提供动车组担当查询和配属查询
- 输入内容：
  * 担当查询：车次号或车组号（如G1202或CR400BF-5033）
  * 配属查询：车型或车号（如CR400BF或5033）
- 显示内容：
  * 查询类型选项卡（担当/配属）
  * 输入框
  * 查询按钮
  * 功能说明提示
- 交互功能：
  * 查询类型切换
  * 输入验证和空值检查
  * 仅在线模式可用提示

4.2 动车组担当结果页面 (pages/emu/result.vue)
- 页面功能：展示动车组担当信息和运行交路
- 输入内容：从查询页面传递的车次号或车组号
- 显示内容：
  * 查询关键词
  * 担当信息表格（担当日、车次、车组）
- 交互功能：
  * 点击车次跳转到车次详情
  * 点击车组跳转到车组担当详情
  * 数据加载状态显示

4.3 动车组配属查询页面 (pages/assignment/query.vue)
- 页面功能：提供动车组配属查询
- 输入内容：车型或车号
- 显示内容：
  * 输入框
  * 查询按钮
  * 功能说明提示
- 交互功能：
  * 输入验证和空值检查
  * 仅在线模式可用提示

4.4 动车组配属结果页面 (pages/assignment/result.vue)
- 页面功能：展示动车组配属信息
- 输入内容：从查询页面传递的车型或车号
- 显示内容：
  * 查询关键词
  * 配属信息表格（车型、车号、配属路局、配属动车所、生产厂家、备注）
  * 分页控制
- 交互功能：
  * 分页浏览
  * 上一页/下一页切换
  * 当前页和总页数显示

### 3.2.5 系统设置模块

系统设置模块提供应用设置和个性化功能。

页面功能详细说明：

5.1 关于页面 (pages/about/about.vue)
- 页面功能：展示应用信息和设置选项
- 输入内容：无
- 显示内容：
  * 应用logo和版本信息
  * 使用协议、隐私政策链接
  * 个性化设置、模式更改链接
  * 更新日志、赞助信息链接
  * 更新管理链接（仅APP端）
  * 隐藏功能（点击logo10次）
- 交互功能：
  * 点击各项设置跳转到对应页面
  * 重置设置功能

5.2 设置页面 (pages/about/mode.vue)
- 页面功能：应用模式设置
- 输入内容：无
- 显示内容：
  * 在线模式选项
  * 离线模式选项
  * 仅离线模式选项
- 交互功能：
  * 模式切换
  * 模式说明和提示

5.3 个性化设置页面 (pages/about/individuation.vue)
- 页面功能：个性化主题设置
- 输入内容：无
- 显示内容：
  * 主题颜色选项
  * 图标样式选项
- 交互功能：
  * 主题切换
  * 实时预览

5.4 更新管理页面 (pages/update/db.vue)
- 页面功能：检查和管理应用更新
- 输入内容：无
- 显示内容：
  * 软件更新状态
  * 数据库更新状态
  * 当前版本和最新版本信息
  * 更新按钮
- 交互功能：
  * 检查更新
  * 下载更新
  * 更新进度显示

### 3.2.6 初始设置模块

初始设置模块提供首次使用时的引导和设置功能。

页面功能详细说明：

6.1 欢迎页面 (pages/oobe/welcome.vue)
- 页面功能：首次使用时的欢迎引导
- 输入内容：无
- 显示内容：
  * 欢迎标题
  * 简短说明
  * 下一步按钮
- 交互功能：
  * 点击按钮进入协议页面

6.2 协议页面 (pages/oobe/protocol.vue)
- 页面功能：显示使用协议
- 输入内容：无
- 显示内容：
  * 协议内容
  * 同意按钮
  * 不同意按钮
- 交互功能：
  * 滚动查看协议
  * 同意/不同意选择

6.3 认证页面 (pages/oobe/auth.vue)
- 页面功能：用户认证设置
- 输入内容：
  * QQ号码
  * 认证密钥
- 显示内容：
  * QQ号输入框
  * 密钥输入框
  * 认证按钮
- 交互功能：
  * 输入验证
  * 认证成功/失败提示

6.4 下载页面 (pages/oobe/download.vue)
- 页面功能：下载数据包
- 输入内容：无
- 显示内容：
  * 下载进度条
  * 下载状态信息
- 交互功能：
  * 开始下载
  * 暂停/继续下载
  * 下载完成提示

## 3.3 对外接口说明

### 3.3.1 铁路数据接口

铁路数据接口是指RailGo系统与铁路数据服务进行交互的接口，通过这些接口获取实时铁路数据。以车次查询为例，接口参数如下所示：

**表3-1 车次查询请求参数表**

| 序号 | 字段名 | 类型 | 是否必填 | 字段描述 |
|------|--------|------|----------|----------|
| 1 | train | string | 是 | 车次号，如G1、D321等 |
| 2 | date | string | 是 | 查询日期，格式YYYYMMDD |

**表3-2 车次查询响应参数表**

| 序号 | 字段名 | 类型 | 字段描述 |
|------|--------|------|----------|
| 1 | numberKind | string | 车次类型，如G、D、C等 |
| 2 | numberFull | array | 完整车次号数组 |
| 3 | type | string | 列车类型，如高速、动车等 |
| 4 | timetable | array | 时刻表数据 |
| 5 | bureauName | string | 所属路局名称 |
| 6 | runner | string | 值乘单位 |
| 7 | carOwner | string | 车辆归属 |
| 8 | car | string | 车型 |
| 9 | rundays | array | 开行日期数组 |
| 10 | diagram | array | 运行交路数据 |

### 3.3.2 地图服务接口

地图服务接口是指RailGo系统与地图服务进行交互的接口，通过这些接口获取地理位置和地图数据。以GPS定位为例，接口参数如下所示：

**表3-6 GPS定位请求参数表**

| 请求方数据域名称 | 数据域中文名称 | 是否可以为空 | 数据域说明 |
|------------------|----------------|--------------|------------|
| type | 定位类型 | 否 | wgs84坐标系 |
| isHighAccuracy | 是否高精度 | 否 | true或false |

**表3-7 GPS定位响应参数表**

| 响应数据域名称 | 数据域中文名称 | 数据域说明 |
|----------------|----------------|------------|
| longitude | 经度 | 当前位置经度 |
| latitude | 纬度 | 当前位置纬度 |
| speed | 速度 | 当前速度(m/s) |
| accuracy | 精度 | 定位精度 |
| altitude | 海拔 | 当前海拔高度 |
| timestamp | 时间戳 | 定位时间戳 |

### 3.3.3 车站大屏接口

车站大屏接口是指RailGo系统与12306车站大屏数据服务进行交互的接口，通过这些接口获取车站实时大屏信息。接口参数如下所示：

**表3-8 车站大屏请求参数表**

| 请求方数据域名称 | 数据域中文名称 | 是否可以为空 | 数据域说明 |
|------------------|----------------|--------------|------------|
| stationCode | 车站电报码 | 否 | 车站电报码，如BJP、SHH等 |
| trainDate | 列车日期 | 否 | 列车日期，格式YYYYMMDD |
| type | 查询类型 | 否 | D表示始发站，A表示到达站 |
| stationTrainCode | 车站车次代码 | 否 | 车次代码 |

**表3-9 车站大屏响应参数表**

| 响应数据域名称 | 数据域中文名称 | 数据域说明 |
|----------------|----------------|------------|
| status | 状态 | 请求状态，true或false |
| data | 数据 | 返回的数据对象 |
| platform | 站台 | 站台号码 |
| wicket | 检票口 | 检票口号码 |

---

## 接口说明总结

RailGo系统通过以上三个主要接口实现与外部服务的交互：

1. **铁路数据接口**：负责获取列车时刻表、车次信息等核心铁路数据
2. **地图服务接口**：提供GPS定位和地理位置相关功能
3. **车站大屏接口**：获取车站实时显示信息，包括站台、检票口等

所有接口均采用标准的RESTful API设计，支持JSON格式的数据交换，确保系统间的互联互通和数据的一致性。